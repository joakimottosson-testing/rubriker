<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rubriker – alpha</title>

<link rel="preload"
      href="https://cdn.aftonbladet.se/fonts/ABMonumentGrotesk/ABMonumentGrotesk-Bold750.woff2"
      as="font"
      type="font/woff2"
      crossorigin>

<style>
@font-face{
  font-family: ABMonument;
  src: url('https://cdn.aftonbladet.se/fonts/ABMonumentGrotesk/ABMonumentGrotesk-Bold750.woff2') format('woff2');
  font-display: swap;
}
@font-face{
  font-family: ABMonumentRegular;
  src: url('https://cdn.aftonbladet.se/fonts/ABMonumentGrotesk/ABMonumentGrotesk-Regular.woff2') format('woff2');
  font-display: swap;
}

/* PAGE */
body{
  margin:0;
  background:#fffec8;
  min-height:100vh;
  font-family:ABMonument,sans-serif;
}

/* OUTER WRAPPER */
.outer{
  position:relative;
  padding-top:24px;
}

/* MAIN COLUMN — true center */
.main{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
}

/* SIDEBAR — aligned with top of Regular textarea (not label) */
.sidebar{
  position:absolute;
  left:50%;
  top:18px;
  transform:translateX(-420px);
  width:220px;

  font-family:"Courier New",Courier,monospace;
  color:rgba(0,0,0,0.65);
}

.sidebar .title{
  font-size:32px;
  letter-spacing:0.12em;
  line-height:1.1;
}
.sidebar .contact{
  margin-top:10px;
  font-size:13px;
  font-style:italic;
}
.sidebar .contact a{
  color:#005bd1;
  text-decoration:none;
}
.sidebar .contact a:hover{
  text-decoration:underline;
}

/* CONTENT STACK */
.wrapper{
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* LABELS */
.label{
  font-size:13px;
  color:#555;
  margin:0 0 4px 2px;
}

/* BOXES */
.box{
  width:375px;
  background:#fff;
  padding:0 17px;
}
.box.regular-box{
  width:360px;
}
.deck-box{
  width:340px;
  background:#fff;
  padding:0 17px;
}
.box-gap{
  margin-bottom:10px;
}

/* TEXTAREAS */
textarea{
  width:100%;
  font-family:ABMonument,sans-serif;
  font-weight:800;
  line-height:1;
  letter-spacing:-0.02em;

  padding:0;
  margin:0;
  border:none;
  outline:none;

  resize:none;
  overflow:hidden;
  background:#fff;
  color:#000;
}

/* Word wrapping (legacy-correct) */
textarea.regular,
textarea.large,
textarea.xl{
  white-space:normal;
  word-break:normal;
  overflow-wrap:normal;
}

/* SIZES (max sizes; JS will shrink as needed) */
textarea.regular{ font-size:44px; }
textarea.regular[data-lines="2"]{ height:calc(44px * 2); }

textarea.large{ font-size:54px; }
textarea.large[data-lines="2"]{ height:calc(54px * 2); }
textarea.large[data-lines="3"]{ height:calc(54px * 3); }

textarea.xl{ font-size:74px; }
textarea.xl[data-lines="2"]{ height:calc(74px * 2); }
textarea.xl[data-lines="3"]{ height:calc(74px * 3); }

/* DECKTEXT */
.decktext{
  font-family:ABMonumentRegular,sans-serif;
  font-size:16px;
  line-height:1.2;
  height:calc(16px * 2.4);
}
.decktext::placeholder{
  color:rgba(0,0,0,0.32);
}
</style>
</head>

<body>

<div class="outer">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="title">RUBRIKER</div>
    <div class="contact">
      alpha v1.0.0<br>
      contact:
      <a href="mailto:joakim.ottosson@aftonbladet.se">Joakim Ottosson</a>
    </div>
  </div>

  <!-- MAIN CONTENT (true center) -->
  <div class="main">
    <div class="wrapper">

      <div>
        <div class="label">Regular · 2 rader</div>
        <div class="box regular-box box-gap">
          <textarea id="regular-2" class="regular" data-lines="2"></textarea>
        </div>
        <div class="deck-box">
          <textarea class="decktext" placeholder="nedryck"></textarea>
        </div>
      </div>

      <div>
        <div class="label">Large · 2 rader</div>
        <div class="box">
          <textarea id="large-2" class="large" data-lines="2"></textarea>
        </div>
      </div>

      <div>
        <div class="label">Large · 3 rader</div>
        <div class="box">
          <textarea id="large-3" class="large" data-lines="3"></textarea>
        </div>
      </div>

      <div>
        <div class="label">XL · 2 rader</div>
        <div class="box">
          <textarea id="xl-2" class="xl" data-lines="2"></textarea>
        </div>
      </div>

      <div>
        <div class="label">XL · 3 rader</div>
        <div class="box">
          <textarea id="xl-3" class="xl" data-lines="3"></textarea>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
function fit(el, { min = 16, max, precision = 0.25 }) {
  const w = el.clientWidth;
  const h = el.clientHeight;
  if (!w || !h) return;

  let lo = min;
  let hi = max;

  while (hi - lo > precision) {
    const mid = (lo + hi) / 2;
    el.style.fontSize = mid + 'px';

    if (el.scrollWidth <= w && el.scrollHeight <= h) lo = mid;
    else hi = mid;
  }
  el.style.fontSize = lo + 'px';
}

function attach(el, max){
  const run = () => fit(el, { min: 16, max });
  el.addEventListener('input', run);
  window.addEventListener('resize', run);
  run();
}

const configs = [
  ['regular-2', 44],
  ['large-2',   54],
  ['large-3',   54],
  ['xl-2',      74],
  ['xl-3',      74],
];

if (document.fonts && document.fonts.ready) {
  document.fonts.ready.then(() => {
    configs.forEach(([id, max]) => {
      const el = document.getElementById(id);
      if (el) attach(el, max);
    });
  });
} else {
  configs.forEach(([id, max]) => {
    const el = document.getElementById(id);
    if (el) attach(el, max);
  });
}
</script>

</body>
</html>